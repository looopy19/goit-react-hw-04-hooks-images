(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{14:function(e,t,c){},15:function(e,t,c){},37:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),a=c(5),o=c.n(a),s=(c(14),c(8)),i=c(3),u=(c(15),c(9)),j=c.n(u);var l=function(e,t){return fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=21770810-71d636d270901957bd723d7c5&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.ok?e.json():Promise.reject(new Error("Not found. Try to change name"))}))},b=c(0);function m(e){var t=e.onSubmit,c=Object(n.useState)(""),r=Object(i.a)(c,2),a=r[0],o=r[1],s=function(){o("")};return Object(b.jsx)("header",{className:"Searchbar",children:Object(b.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),""!==a.trim()?(t(a),s()):alert("Please enter something")},children:[Object(b.jsx)("button",{type:"submit",className:"SearchForm-button"}),Object(b.jsx)("input",{value:a,onChange:function(e){return o(e.currentTarget.value.toLowerCase())},className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}var d=function(e){var t=e.onClick;return Object(b.jsx)("button",{onClick:function(){t(),setTimeout((function(){window.scrollBy({top:document.documentElement.clientHeight-130,behavior:"smooth"})}),500)},className:"Button",type:"button",children:"Load more"})};function O(e){var t=e.text;return Object(b.jsxs)("p",{children:[" ",t," "]})}O.defaultProps={text:"Something went wrong, please enter query properly"};var h=O,f=document.querySelector("#modal-root");var x=function(e){var t=e.src,c=e.alt,r=e.onClose,o=Object(n.useRef)(!0);Object(n.useEffect)((function(){o.current&&window.addEventListener("keydown",s)}));var s=function(e){"Escape"===e.code&&r()};return Object(a.createPortal)(Object(b.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&r()},children:Object(b.jsx)("div",{className:"Modal",children:Object(b.jsx)("img",{src:t,alt:c})})}),f)};var g=function(e){var t=e.src,c=e.alt,r=e.largeImageUrl,a=Object(n.useState)(!1),o=Object(i.a)(a,2),s=o[0],u=o[1],j=function(){return u(!s)};return Object(b.jsxs)("li",{className:"ImageGalleryItem",children:[Object(b.jsx)("img",{onClick:j,src:t,alt:c,className:"ImageGalleryItem-image"}),s&&Object(b.jsx)(x,{onClose:j,src:r,alt:c})]})};var p=function(e){var t=e.images;return Object(b.jsx)("ul",{className:"ImageGallery",children:t.map((function(e,t){return Object(b.jsx)(g,{src:e.webformatURL,alt:e.tags,largeImageUrl:e.largeImageURL},t)}))})};function v(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(1),o=Object(i.a)(a,2),u=o[0],O=o[1],f=Object(n.useState)([]),x=Object(i.a)(f,2),g=x[0],v=x[1],S=Object(n.useState)("idle"),w=Object(i.a)(S,2),y=w[0],k=w[1],C=Object(n.useState)(null),N=Object(i.a)(C,2),I=N[0],E=N[1];Object(n.useEffect)((function(){c&&(k("pending"),l(c,u).then((function(e){if(!(e.total>0))return Promise.reject(new Error("Invalid request"));v((function(t){return[].concat(Object(s.a)(t),Object(s.a)(e.hits))})),k("resolved"),u>1&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){E(e),k("rejected")})))}),[c,u,v]);var L=function(){return O((function(e){return e+1}))},P=function(e){r(e),O(1),v([])};switch(y){case"idle":return Object(b.jsx)("div",{children:Object(b.jsx)(m,{onSubmit:P})});case"pending":return Object(b.jsxs)("div",{children:[Object(b.jsx)(m,{onSubmit:P}),Object(b.jsx)(p,{images:g}),Object(b.jsx)(j.a,{}),Object(b.jsx)(d,{onClick:L})]});case"resolved":return Object(b.jsxs)("div",{children:[Object(b.jsx)(m,{onSubmit:P}),Object(b.jsx)(p,{images:g}),Object(b.jsx)(d,{onClick:L})]});case"rejected":return Object(b.jsxs)("div",{children:[Object(b.jsx)(m,{onSubmit:P}),Object(b.jsx)(h,{text:I.text})]});default:return Object(b.jsx)("div",{children:Object(b.jsx)(m,{onSubmit:P})})}}o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(v,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.8a3a9ca7.chunk.js.map